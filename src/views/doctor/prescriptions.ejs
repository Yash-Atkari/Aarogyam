<%- layout("./layouts/doctorboilerplate") %>

<link rel="stylesheet" href="/css/doctor/prescriptions.css">

<body>
    <div class="container">
        <h2>
            Prescriptions for 
            <a href="" style="text-decoration: none;">
                <%= appointments[0].patientId.fullName || appointments[0].patientId.username %>
            </a>
        </h2>

        <!-- Use custom grid container -->
        <div class="cards-container">
            <% for (let appointment of appointments) { %>
                <div class="prescription-card">
                    <h6 class="text-dark">
                        <i class="fa-solid fa-calendar"></i>&nbsp; Appointment on 
                        <%= new Date(appointment.date).toDateString() %>
                    </h6>

                    <% if (appointment.attachments && appointment.attachments.length > 0) { %>
                        <p><strong>Prescriptions:</strong></p>
                        <ul>
                            <% for (let file of appointment.attachments) { %>
                                <li>
                                    <a href="<%= file %>" class="btn btn-primary" target="_blank">
                                        <i class="fa-solid fa-eye"></i> View
                                    </a>
                                    <a href="<%= file %>" class="btn btn-success" target="_blank" download>
                                        <i class="fa-solid fa-download"></i> Download
                                    </a>
                                </li>
                            <% } %>
                        </ul>
                    <% } else { %>
                        <p class="text-muted">No prescriptions available</p>
                    <% } %>

                    <p class="text-muted badge">
                        <%= new Date(appointment.date).toDateString() %>
                    </p>
                </div>
            <% } %>
        </div>
    </div>
</body>
